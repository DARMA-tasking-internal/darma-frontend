%!TEX root = sandReportSpec.tex

\chapter{Requirements} 
\label{chap:requirements} 
\section{High-level Philosophy}
The requirements are informed by a few high-level design principles:
\begin{itemize}
\item Keep simple things simple
\item Keep tractable things tractable
\item Make difficult things tractable
\item New programming models should not complicate reasoning about code correctness
\item New programming models should simplify application-specific performance optimizations
\item Pareto rule: 80\% of the compute benefit from modest human effort preferred over 100\% of computer benefit from massive human effort
\end{itemize}
Essentially, code written in the DARMA programming model should be not be significantly more difficult than existing programming models (parallel programming is already difficult).
Additionally, the DARMA programming model should not pass off 100\% of the responsibility for high-performance to the runtime/compilers.
Rather, DARMA should enable application developers to express performance improvements in ways not previously possible.

\section{Technical Justification for Asynchronous Many-Task (AMT)}
Our approach is informed by what we see as the ``axiomatic'' challenges facing high-performance computing:
\begin{itemize}
\item SPMD (data parallelism) will remain the dominant parallelism and primary structure of code
\item However, new architectures will have too much compute capacity for basic data parallelism to fill
\item Task and pipeline parallelism will help ``fill'' the compute capacity on machines
\item The traditional abstract machine model (flat memory spaces, uniform compute elements) will get further from actual system architecture as accelerators and deep memory hierarchies become more commonplace
\item Applications with dynamic load balance or dynamic sparsity will require composable, migratable chunks of work
\end{itemize}

\section{Expected Products/Results from DARMA}
The philosophy and technical justification lead to the following results or products that should be produced directly from DARMA or indirectly through collaboration:
\begin{itemize}
\item An abstraction layer between applications and the
runtime system/physical architecture that shields physics codes from diversity and
complexity of evolving architectures.
\item A performant implementation of a software stack that supports this
abstraction layer.
\item Community best practices and eventual standards for this abstraction
layer
\end{itemize}

\section{Specific Design Requirements}
Combining our high-level philosophy with the specific technical justifications leads us to the following design requirements gathered to date:
\begin{compactitem}
\item Programming model/runtime must support \gls{spmd} algorithms in an intuitive and simple way.
\item Programming model/runtime should provide hooks for developers to express application-specific data structures/data models.
\item Programming model/runtime must support collective operations.
\item Application developer should be able to control initial problem decomposition.
\item Application developer should be able to express and mix all form of parallelism.
\end{compactitem}


\paragraph{Co-design contributors}
In addition to the authors listed on this document,
the \gls{API} is being \gls{co-design}ed and vetted with application developers
and computer scientists whose knowledge spans the entire runtime software stack.

\paragraph{Applications affecting the design and requirements:}
\begin{compactitem}
\item Sandia \gls{ASC} \gls{ATDM} electromagnetic plasma code (POC: Matt Bettencourt)
\item Sandia \gls{ASC} \gls{ATDM} reentry code (POCs: Micah Howard, Steve Bova)
\item \gls{Trilinos} Phalanx package for finite element matrix assembly (POC: Roger Pawlowski)
\item Uncertainty quantification driver (POCs: Eric Phipps, Francesco Rizzi)
\item Domain decomposition preconditioners for linear solvers (POCs: Ray Tuminaro, Clark Dohrman)
\end{compactitem}
 
\paragraph{Computer Science Research Efforts}
\begin{compactitem}
\item Kokkos (POCs: Carter Edwards, Christian Trott)
\item Data Management (POCs: Craig Ulmer, Gary Templet)
\item Low-level operating systems requirements (POCs: Stephen Olivier, Ron
    Brightwell)
\end{compactitem}



