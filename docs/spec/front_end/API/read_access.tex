%!TEX root = ../sandReportSpec.tex
\subsection{\texttt{read\_access}}
\label{ssec:api_fe_read_access}

\paragraph{Summary}\mbox{}\\
\codetarget{read_access<T>} creates a \gls{handle} with \text{read-only} access to data that has been or will be
published elsewhere in the system.


\paragraph{Syntax}\mbox{}\\
\begin{CppCode}
/* unspecified, convertible to AccessHandle<T> */
darma_runtime::read_access<T>(KeyParts..., version=KeyExpression);
\end{CppCode}

\todo[inline]{David/Jeremy: is this where we should be including a description of 
  ReadAccessHandle<T>?  It is referenced in the functor.tex file, but is not
  included in this section or in AccessHandle section.  It should be in one or
the other at least}

\paragraph{Positional Arguments}\mbox{}\\
\begin{itemize}
  \item |KeyParts...|: tuple of values identifying the key of the data to
  be read.
\end{itemize}

\paragraph{Keyword Arguments}\mbox{}\\
\begin{itemize}
  \item |version=KeyExpression| (or |version(KeyExpression...)|,
see \S~\ref{sec:keyword} for multiple-right-hand-side keyword argument usage):
the version used to publish the data to be accessed.
The value can be an arbitrary |KeyExpression|.
\end{itemize}


\paragraph{Return}\mbox{}\\
An object of unspecified type that may be treated as an \codelink{AccessHandle<T>}
with the key given by the arguments.
\todo{David/Jeremy: should this be ReadAccessHandle<T>?}

\paragraph{Details}\mbox{}\\
This function creates a \gls{handle} to data that already exists and 
needs to be accessed with read-only privileges. 
It takes as input the \gls{tuple} of values uniquely 
identifying the data that needs to be read.
Immediately following this function, the \gls{handle} will have Read
\gls{scheduling permissions} and None \gls{immediate permissions}.
The \codelink{key}-\codelink{version} requested must eventually match that of a
\codelink{key}-\codelink{version} that was \codelink{publish}ed.

In general, \codetarget{read_access} data is migratable and potentially stored off-node.

\paragraph{Code Snippet}\mbox{}\\
\begin{figure}[!h]
\begin{CppCodeNumb}
/* on one rank: */
auto my_handle1 = initial_access<double>("key_1");
create_work([=]{
  my_handle1.emplace_value(5.3);
});
my_handle1.publish(n_readers=1, version="final");

//...

/* on another rank: */
auto readHandle = read_access<double>("key_1", version="final");
create_work([=]{
  std::cout << readHandle.get_value() << std::endl;
});
\end{CppCodeNumb}
\label{fig:fe_api_readaccess}
\caption{Basic usage of \protect\codelink{read_access}.}
\end{figure}

